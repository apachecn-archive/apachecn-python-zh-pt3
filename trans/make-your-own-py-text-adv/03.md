# 3.倾听你的用户

所有的计算机程序都有一定程度的用户输入。有些可能只是要求用户启动应用程序，而另一些只是耐心等待，直到用户告诉它做一些事情。由于这个应用程序是一个文本冒险，它更接近于“耐心等待”的范围。在本章中，您将学习如何阅读和处理用户在命令提示符下键入的指令。

## 你的朋友:标准输出和标准输入

根据定义，文本冒险需要用户输入程序的文本指令。作为响应，程序将向用户显示文本。这是命令行应用程序中的常见模式。

为了对此有所了解，让我们演示一个已经安装的命令行应用程序——Python。没错，`python`命令不仅仅可以运行程序。打开命令提示符并运行`python`。您应该会看到类似这样的内容:

```
$ python
Python 3.4.1 (default, May 8 2015, 22:07:39)
[GCC 4.2.1 Compatible Apple LLVM 6.1.0 (clang-602.0.49)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>>

```

现在，在光标处，键入以下内容并按 Enter 键:

```
help(print)

```

您应该看到这个:

```
>>> help(print)

Help on built-in function print in module builtins:

[...]

```

要退出该视图，只需按下`q`。

我们只是通过输入两个命令与这个命令行应用程序进行交互:`help(print)`和`q`。这两个命令都由 Python 读入、解释和响应。

当应用程序向控制台写出文本时，这被称为写入标准输出或简称为 stdout。类似地，当用户(甚至另一个应用程序)将文本写入控制台时，这被称为写入标准输入或标准输入。

事实上，如果您回到控制台并再次键入`help(print)`，您将会看到文档引用了`sys.stdout`。默认情况下，`print`函数将文本写入标准输出。您已经在运行游戏时看到了这一点——应用程序向控制台显示了介绍文本。

现在尝试输入`help(input)`。您可以看到`input`函数将“从标准输入中读取一个字符串”这正是我们所寻求的，让我们的应用程序能够倾听用户。

要退出，按下`q`，然后键入`quit()`。这应该会把你带回一个常规的命令提示符。

## 从标准输入读取

打开一个新文件，另存为`echo.py`。输入以下行:

```
input("Type some text: ")

```

保存文件并使用`python echo.py`运行。请记住，要运行应用程序，您必须位于包含该文件的同一目录下。

希望您看到提示`"Type some text"`。继续按它说的做，然后按回车键。看起来好像程序忽略了你，把你扔回到命令提示符下。刚刚发生了什么？`input`命令将提示文本(`"Type some text"`)打印到标准输出，并读入您对标准输入的响应。因为没有更多的指令，应用程序简单地退出。

正如这个文件的名字所暗示的那样，我们将创建一个向用户反馈信息的应用程序，但是首先我们需要学习如何存储临时信息。

## 保存信息

在上一个练习中，我们能够从用户那里读入信息，但是我们不能对它做任何事情。我们需要暂时保存这些输入，以便可以打印出来。可以使用变量将临时信息存储在计算机的内存中，也可以从内存中访问临时信息。

Python 中变量名的一些例子有`n`、`my_number`和`address`。要在变量中存储信息，我们只需使用`=`操作符。这被称为赋值操作符。例如:

```
1   n = 5
2   my_number = 3
3   address = '123 Maple St.'

```

然后，每当我们需要调用这些信息时，我们可以参考变量名称，如`print(n)`或`print(address)`。让我们练习一下。

返回您的终端并运行`python`。当我们之前这样做时，我们使用了`help`命令来获取关于函数的信息。也许更有用的特性是能够输入 Python 代码并立即执行。这被称为“Python 解释器”、“Python shell”或“Python REPL”(Read Evaluate Print Loop 的缩写)。

继续输入以下命令:

```
>>> address = '123 Maple St.'
>>> print(address)

```

你应该看到`"123 Maple St."`被打印出来。这是因为我们使用赋值操作符将值“123 Maple St .”赋给了变量`address`。然后当`print`函数运行时，它在内存中查找`address`的真实值，这样它就知道要打印出什么。

有了这些信息，我们现在可以用我们的 echo 程序做一些更有趣的事情。返回`echo.py`，按如下方式更改代码:

```
1   user_input = input("Type some text: ")
2   print(user_input)

```

再次运行这个程序，验证它是否能回显您输入的任何文本。让我们做一些类似于我们游戏的事情。打开`game.py`并添加以下几行:

```
2   action_input = input('Action: ')
3   print(action_input)

```

### 数据类型

在我们结束这一章之前，我们需要简要回顾一些数据类型。到目前为止，我们主要看到了像`"Type some text"`和`"123 Maple St."`这样的文本数据。这些被称为字符串 [<sup>1</sup>](#Fn1) ，Python 知道它们是字符串，因为它们在代码中被单引号或双引号包围。`input`返回的数据也是一个字符串。以下是一些字符串示例:

```
1   name = 'Phillip'
2   forecast = "It's going to rain!"
3   url = 'http://letstalkdata.com'

```

下一个最常见的数据类型是整数。如果你还记得数学课的话，整数就是像 1，15，-99 和 0 这样的数字。在 Python 中，整数作为数字输入，没有任何额外的符号。

```
1   a = 3
2   b = 4
3   hypotenuse = 5

```

有小数点的数称为浮点数，或简称为 float。浮点数的输入类似于整数，除了它们包含小数点。

```
1   a = 3.0
2   b = 4.0
3   hypotenuse = 5.0

```

您可以像预期的那样对数字执行基本的数学运算。在解释器中尝试其中的一些:

```
>>> 5 + 6
>>> 0 - 99
>>> 5.0 / 2.0
>>> 5 / 2
>>> 4 * (7 - 2)

```

Python 内置了很多很多的数据类型，但是现在需要注意的重要一点是，Python 是根据您的输入方式来推断类型的。`my_variable = 5`和`my_variable = '5'`差别很大！

## 家庭作业

尝试以下家庭作业练习:

1.  `my_variable = 5`和`my_variable = '5'`有什么区别？
2.  `print(n)`和`print('n')`有什么区别？如果您不确定，请尝试在 Python 解释器中输入以下命令:

    ```
    n = 5
    print(n)
    print('n')

    ```

3.  尝试不使用变量重写`echo.py`。

Footnotes [1](#Fn1_source)

在内部，Python 以各种不同的格式存储文本数据。你会遇到的最常见的是`str`和`bytes`。因此，单词“字符串”并不总是与 Python `str`类型完全相关。